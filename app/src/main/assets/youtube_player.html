<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Player</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevent scrollbars */
        }
        #youtubePlayer {
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script type="text/javascript">
        var player;
        function onYouTubeIframeAPIReady() {
            // Get the videoId from the URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('videoId');

            player = new YT.Player('youtubePlayer', {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'mute': 1,  // Start muted
                    'controls': 1,
                    'showinfo': 1,
                    'rel': 1
                },
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.ENDED) {
                window.nextVideo();
            }
        }

        window.nextVideo = function() {
            Android.loadNextVideo(); // Call the Android function to load the next video
        };

        // Function to unmute the video
        function unmuteVideo() {
            if (player) {
                player.unMute();
            }
        }

        // Function to play the video
        function playVideo(){
            if(player){
                player.playVideo();
            }
        }

        // Function to mute the video
        function muteVideo(){
            if(player){
                player.mute();
            }
        }

        // Function to pause the video
        function pauseVideo(){
            if(player){
                player.pauseVideo();
            }
        }

    </script>
</head>
<body>
<div id="youtubePlayer"></div>

<script>
    // Log the key codes to figure out which key is being pressed
    document.addEventListener('keydown', function(event) {
        console.log('Key pressed: ' + event.code + ' (' + event.key + ')');

        // KeyEvent.KEYCODE_VOLUME_MUTE is typically mapped to "AudioVolumeMute"
        if (event.code === 'AudioVolumeMute' || event.key === 'VolumeMute') {
            //unmuteVideo();  // Unmute the video when the button is pressed
        }

        // You may also try KeyEvent Android key codes for remote control (if applicable)
        // event.keyCode === 164 for mute on Android
        if (event.keyCode === 164) {
            //unmuteVideo();
        }
    });
</script>

</body>
</html>
